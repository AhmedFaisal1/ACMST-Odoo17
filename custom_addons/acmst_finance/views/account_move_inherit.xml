<odoo>

  <!-- If you previously had a view with this id, disable it (prevents duplicates) -->
  <record id="view_move_form_inherit_acmst_univid" model="ir.ui.view">
    <field name="active">False</field>
  </record>

  <!-- Header tweaks: labels, positions, visibility -->
  <record id="view_move_form_student_header" model="ir.ui.view">
    <field name="name">account.move.form.student.header</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="priority" eval="300"/>
    <field name="arch" type="xml">

      <!-- Change the label next to partner to "Student" -->
      <xpath expr="//label[@for='partner_id']" position="replace">
        <label for="partner_id">Student</label>
      </xpath>
      <!-- Also set the field's own string attribute as a fallback -->
      <xpath expr="//sheet//field[@name='partner_id']" position="attributes">
        <attribute name="string">Student</attribute>
      </xpath>

      <!-- Put University ID & Transaction Number right under Student WITH LABELS -->
      <xpath expr="//sheet//field[@name='partner_id']" position="after">
  <div class="o_row">
    <label for="invoice_origin">University ID</label>
    <field name="invoice_origin" readonly="1" class="oe_inline"/>
  </div>
  <div class="o_row">
    <label for="ref">Transaction Number</label>
    <field name="ref" readonly="1" class="oe_inline"/>
  </div>
</xpath>

      <!-- Show Payment Type on the RIGHT, just after Invoice Date -->
      <xpath expr="//sheet//field[@name='invoice_date']" position="after">
        <field name="acmst_payment_type" string="Payment Type" readonly="1"/>
      </xpath>

      <!-- Hide the default Payment Reference field -->
      <xpath expr="//sheet//field[@name='payment_reference']" position="attributes">
        <attribute name="invisible">1</attribute>
      </xpath>

      <!-- Rename the lines tab -->
      <xpath expr="//page[.//field[@name='invoice_line_ids']]" position="attributes">
        <attribute name="string">Student Lines</attribute>
      </xpath>
    </field>
  </record>

  <!-- Replace the invoice lines tree with Student Name | Price | Total -->
  <record id="view_move_form_student_lines_replace" model="ir.ui.view">
    <field name="name">account.move.form.student.lines.replace</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="priority" eval="300"/>
    <field name="arch" type="xml">
      <xpath expr="//field[@name='invoice_line_ids']/tree" position="replace">
        <tree string="Student Lines">
          <field name="name"        string="Student Name"/>
          <field name="price_unit"  string="Price"/>
          <field name="price_total" string="Total" optional="show"/>
        </tree>
      </xpath>
    </field>
  </record>

  <!-- Rename actions so menus/breadcrumbs say Studentâ€¦ -->
  <record id="account.action_move_out_invoice_type" model="ir.actions.act_window">
    <field name="name">Student Invoices</field>
  </record>
  <record id="account.action_move_out_refund_type" model="ir.actions.act_window">
    <field name="name">Student Credit Notes</field>
  </record>

</odoo>
