<odoo>
  <!-- FORM -->
  <record id="view_acmst_enrollment_form" model="ir.ui.view">
    <field name="name">acmst.enrollment.form</field>
    <field name="model">acmst.enrollment</field>
    <field name="arch" type="xml">
      <form string="Payment">
        <header>
          <button name="action_create_invoice" type="object" string="Create Invoice"
                  class="oe_highlight" invisible="state == 'invoiced'"/>
          <button name="action_open_invoice" type="object" string="Preview Invoice"
                  invisible="state != 'invoiced'"/>
          <field name="state" widget="statusbar" statusbar_visible="draft,invoiced"/>
        </header>

        <sheet>
          <group>
            <group>
              <field name="student_id" options="{'no_create_edit': True}" required="1"/>
              <field name="frmno" string="University ID" readonly="1"/>
              <field name="year"/>
              <field name="level"/>
              <field name="semester"/>
              <field name="program"/>
            </group>
            <group>
              <field name="date"/>
              <field name="payment_type"/>
              <field name="transaction_number" invisible="payment_type == 'cash'"/>
              <field name="payment"/>
              <field name="currency_id" invisible="1"/>
            </group>
          </group>

          <group>
            <group>
              <field name="passport_scan"/>
            </group>
            <group>
              <field name="national_id_scan"/>
            </group>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <!-- TREE -->
  <record id="view_acmst_enrollment_tree" model="ir.ui.view">
    <field name="name">acmst.enrollment.tree</field>
    <field name="model">acmst.enrollment</field>
    <field name="arch" type="xml">
      <tree string="Payments">
        <field name="display_name" string="Name"/>
        <field name="student_name"/>
        <field name="frmno" string="University ID"/>
        <field name="year"/>
        <field name="level"/>
        <field name="semester"/>
        <field name="program"/>
        <field name="date"/>
        <field name="payment_type"/>
        <field name="payment"/>
        <field name="internal_number"/>
        <field name="state"/>
      </tree>
    </field>
  </record>

  <!-- SEARCH: optional quick filters -->
  <record id="view_acmst_enrollment_search" model="ir.ui.view">
    <field name="name">acmst.enrollment.search</field>
    <field name="model">acmst.enrollment</field>
    <field name="arch" type="xml">
      <search string="Payments">
        <field name="frmno" string="University ID"/>
        <field name="student_name"/>
        <filter name="by_cash" string="Cash" domain="[('payment_type','=','cash')]"/>
        <filter name="by_bank" string="Bank Transfer" domain="[('payment_type','=','bank')]"/>
        <separator/>
        <filter name="filter_draft" string="Draft" domain="[('state','=','draft')]"/>
        <filter name="filter_invoiced" string="Invoiced" domain="[('state','=','invoiced')]"/>
        <group expand="0" string="Group By">
          <filter name="g_student" string="Student" context="{'group_by': 'student_name'}"/>
          <filter name="g_year" string="Year" context="{'group_by': 'year'}"/>
        </group>
      </search>
    </field>
  </record>
    <!-- ACTION: فتح شاشة Payments -->
<record id="action_acmst_enrollments" model="ir.actions.act_window">
    <field name="name">Payments</field>
    <field name="res_model">acmst.enrollment</field>
    <field name="view_mode">tree,form</field>
    <field name="search_view_id" ref="view_acmst_enrollment_search"/>
    <field name="context">{}</field>
</record>

</odoo>
